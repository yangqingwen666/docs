---
title: "主机镜像"
weight: 3
description: 主机镜像用于创建虚拟机，主机镜像是同时将模板虚拟机上的所有硬盘保存为镜像，基于主机镜像创建的虚拟机拥有除模板虚拟机用户数据之外的全部数据。
---

主机镜像用于创建虚拟机。

**来源**：通过虚拟机列表保存镜像功能，保存主机镜像。

**入口**：在云管平台单击左上角![](../../../images/intro/nav.png)导航菜单，在弹出的左侧菜单栏中单击 **_"主机/镜像/主机镜像"_** 菜单项，进入主机镜像页面。

![](../../../images/computing/hostimage.png)

## 修改属性

该功能用于修改主机镜像的属性信息。

1. 在主机镜像页面，单击镜像右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"修改属性"_** 菜单项，弹出修改属性对话框。
2. 支持修改以下参数：
     - 镜像名称：设置镜像的名称，建议名称与镜像的发行版本相关。
     - 删除保护：设置镜像是否启用删除保护，禁用删除保护后，可删除镜像。启用删除保护后，无法删除镜像。
     - 操作系统：包括Linux、Windows、macOS、VMware以及其他操作系统。
     - 发行版：选择镜像的发行版本。
     - 磁盘驱动：包括系统自动选择、virtio、scsi、pvscsi、ide、sata。根据磁盘类型选择对应的驱动，建议选择”系统自动选择“。
     - 网卡驱动：包括系统自动选择、virtio、e1000、vmxnet3。建议选择“系统自动选择”。

3. 单击 **_"确定"_** 按钮，完成修改。

## 设置共享

该功能用于设置镜像的共享范围。

项目资源的共享范围有五种：

- 不共享：即项目资源只能本项目的用户可以使用。
- 项目共享-部分（本域内多项目共享）：即项目资源可以共享到同域下的指定项目（一个或多个），只有本项目和被共享项目下的用户可以使用项目资源。
- 项目共享-全部（本域共享）：即项目资源可以共享给域下所有项目，即项目所在域的用户都可以使用项目资源。
- 域共享-部分（多域共享）：即项目资源可以共享到指定域（一个或多个），只有项目资源所在域和共享域下的用户可以使用项目资源。
- 域共享-全部（全局共享）：即项目资源可以共享给全部域使用，即系统中所有用户都可以使用项目资源。

{{% alert title="说明" %}}
设置域共享的条件：

- 在{{<oem_name>}}平台已开启三级权限。
- 用户处于管理后台。

设置项目共享的条件：

- 用户处于管理后台或域管理后台。

{{% /alert %}}

**单个主机镜像设置共享**

1. 在主机镜像页面，单击镜像右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"设置共享"_** 菜单项，弹出设置共享对话框。
2. 配置以下参数。
   - 当共享范围选择为“不共享”时，即项目资源的共享范围为私有，仅本项目的用户可以使用。
   - 当共享范围选择为“项目共享”时，需要选择本域下可共享的项目。
       - 当项目选择同域下的一个或多个项目时，即项目资源的共享范围为项目共享-部分，只有项目资源所在项目和共享项目下的用户可以使用项目资源。
       - 当项目选择全部时，即项目资源的共享范围为项目共享-全部，项目所在域下的用户都可以使用项目资源。
   - 当共享范围选择为“域共享”时，需要选择共享的域。
       - 当域选择其中的一个或多个域时，即项目资源的共享范围为域共享-部分，只有项目资源所在域和共享域下的用户可以使用域资源。
       - 当域选择全部时，即项目资源的共享范围为域共享-全部，系统中的所有用户都可以使用项目资源。
3. 单击 **_"确定"_** 按钮，完成操作。

**批量设置共享**

1. 在主机镜像列表中选择一个或多个主机镜像，单击列表上方 **_"设置共享"_** 按钮，弹出设置共享对话框。
2. 配置以下参数。
   - 当共享范围选择为“不共享”时，即项目资源的共享范围为私有，仅本项目的用户可以使用。
   - 当共享范围选择为“项目共享”时，需要选择本域下可共享的项目。
       - 当项目选择同域下的一个或多个项目时，即项目资源的共享范围为项目共享-部分，只有项目资源所在项目和共享项目下的用户可以使用项目资源。
       - 当项目选择全部时，即项目资源的共享范围为项目共享-全部，项目所在域下的用户都可以使用项目资源。
   - 当共享范围选择为“域共享”时，需要选择共享的域。
       - 当域选择其中的一个或多个域时，即项目资源的共享范围为域共享-部分，只有项目资源所在域和共享域下的用户可以使用域资源。
       - 当域选择全部时，即项目资源的共享范围为域共享-全部，系统中的所有用户都可以使用项目资源。
3. 单击 **_"确定"_** 按钮，完成操作。

## 更改项目

该功能用于更改主机镜像的所属项目。

**单个主机镜像更改项目**

1. 在主机镜像页面，单击镜像右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"更改项目"_** 菜单项，弹出更改项目对话框。
2. 选择域和域下的项目，单击 **_"确定"_** 按钮，完成操作。

**批量更改项目**

1. 在主机镜像列表中选择一个或多个主机镜像，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"更改项目"_** 菜单项，弹出更改项目对话框。
2. 选择域和域下的项目，单击 **_"确定"_** 按钮，完成操作。

## 设置删除保护

该功能用于设置主机镜像的删除保护。当主机镜像启用删除保护后，主机镜像无法被删除；当主机镜像禁用删除保护后，主机镜像才可以被删除。

**单个主机镜像设置删除保护**

1. 禁用删除保护：
    - 单击主机镜像名称右侧带有![](../../../images/computing/delprotect1.png)图标时，单击主机镜像右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"设置删除保护"_** 菜单项，弹出设置删除保护对话框。
    - 选择"禁用"删除保护，单击 **_"确定"_** 按钮。
2. 启用删除保护：
    - 当主机镜像名称右侧不带![](../../../images/computing/delprotect1.png)图标时，单击主机镜像右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"设置删除保护"_** 菜单项，弹出设置删除保护对话框。
    - 选择"启用"删除保护，单击 **_"确定"_** 按钮。

**批量设置删除保护**

1. 禁用删除保护：
    - 在主机镜像列表中勾选一个或多个主机镜像，单击列表上方 **_"设置删除保护"_** 按钮，弹出设置删除保护对话框。
    - 选择"禁用"删除保护，单击 **_"确定"_** 按钮，批量为主机镜像禁用删除保护。
2. 启用删除保护：
    - 在主机镜像列表中勾选一个或多个主机镜像，单击列表上方 **_"设置删除保护"_** 按钮，弹出设置删除保护对话框。
    - 选择"启用"删除保护，单击 **_"确定"_** 按钮，批量为主机镜像启用删除保护。


## 删除

该功能用于删除主机镜像，当主机镜像名称项右侧有![](../../../images/computing/delprotect1.png)图标，表示主机镜像启用了删除保护，无法删除主机镜像，如需删除主机镜像，需要取消删除保护。

{{% alert title="说明" %}}
- 管理员可以删除所有主机镜像。
- 域管理员只可以删除本域的主机镜像。
- 项目用户只可以删除本项目的主机镜像。
{{% /alert %}}

**单个删除**

1. 在主机镜像页面，单击镜像右侧操作列的 **_"更多"_** 按钮，选择下拉菜单 **_"删除"_** 菜单项，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

**批量删除**

1. 在镜像列表中选择一个或多个镜像，单击列表上方 **_"删除"_** 按钮，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

## 查看主机镜像详情

该功能用于查看主机镜像的详细信息。

1. 在主机镜像页面，单击主机镜像名称项，进入主机镜像详情页面。
2. 详情页面顶部菜单项支持对镜像镜像管理操作。
3. 查看镜像的信息。
     - 基本信息：包括云上ID、ID、名称、状态、域、项目、共享范围、类型、子镜像、大小、创建时间、更新时间备注。
     - 镜像属性：包括磁盘格式、系统语言、最小内存要求、最小磁盘要求、磁盘驱动、网卡驱动、应用平台。
     - 多云镜像：查看镜像的其他格式的信息，包括校验和、格式、大小以及状态。
     - 其他信息：支持开启或关闭删除保护。

### 查看子镜像信息

该功能用于查看主机镜像的子镜像信息。为虚拟机保存主机镜像，实质是将虚拟机的每块硬盘保存为子镜像。

1. 在主机镜像页面，单击主机镜像名称项，进入主机镜像详情页面。
2. 单击“子镜像”页签，进入子镜像页面。
3. 查看子镜像的镜像名称、镜像类别、格式、创建时间等信息。


### 查看操作日志

该功能用于查看主机镜像相关操作的日志信息

1. 在主机镜像页面，单击主机镜像名称项，进入主机镜像详情页面。
2. 单击“操作日志”页签，进入操作日志页面。
    - 加载更多日志：列表默认显示20条操作日志信息，如需查看更多操作日志，请单击 **_"加载更多"_** 按钮，获取更多日志信息。
    - 查看日志详情：单击操作日志右侧操作列 **_"查看"_** 按钮，查看日志的详情信息。支持复制详情内容。
    - 查看指定时间段的日志：如需查看某个时间段的操作日志，在列表右上方的开始日期和结束日期中设置具体的日期，查询指定时间段的日志信息。
    - 导出日志：目前仅支持导出本页显示的日志。单击右上角![](../../../images/system/download.png)图标，在弹出的导出数据对话框中，设置导出数据列，单击 **_"确定"_** 按钮，导出日志。
